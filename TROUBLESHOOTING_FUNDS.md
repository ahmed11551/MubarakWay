# üîç –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã: "No rows returned"

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç: **"Success. No rows returned"**

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ñ–æ–Ω–¥ "–ò–Ω—Å–∞–Ω" –ª–∏–±–æ:
- –ù–µ –±—ã–ª —Å–æ–∑–¥–∞–Ω (Step 1 –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω)
- –ë—ã–ª –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
- –ù–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–æ–Ω–¥ –≤–æ–æ–±—â–µ

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ñ–æ–Ω–¥—ã (–≤–∫–ª—é—á–∞—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ):

```sql
SELECT id, name, is_active, category 
FROM public.funds 
ORDER BY created_at DESC;
```

**–ß—Ç–æ —ç—Ç–æ –ø–æ–∫–∞–∂–µ—Ç:**
- –ï—Å–ª–∏ —Ñ–æ–Ω–¥ "–ò–Ω—Å–∞–Ω" –µ—Å—Ç—å, –Ω–æ `is_active = false` ‚Üí –Ω—É–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
- –ï—Å–ª–∏ —Ñ–æ–Ω–¥–∞ –Ω–µ—Ç –≤–æ–æ–±—â–µ ‚Üí –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å

### –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å/–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ–Ω–¥ –ò–Ω—Å–∞–Ω

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç `scripts/012_create_insan_fund_only.sql`:

```sql
INSERT INTO public.funds (
  id, name, name_ar, description, description_ar, logo_url, category,
  is_verified, is_active, total_raised, donor_count, website_url, contact_email,
  created_at, updated_at
) VALUES (
  '00000000-0000-0000-0000-000000000001'::uuid,
  '–§–æ–Ω–¥ –ò–Ω—Å–∞–Ω',
  'ÿµŸÜÿØŸàŸÇ ÿ•ŸÜÿ≥ÿßŸÜ',
  '–ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–æ–Ω–¥ "–ò–Ω—Å–∞–Ω" - –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä—Ç–Ω–µ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã MubarakWay.',
  'ÿµŸÜÿØŸàŸÇ ÿ•ŸÜÿ≥ÿßŸÜ ÿßŸÑÿÆŸäÿ±Ÿä - ÿßŸÑÿ¥ÿ±ŸäŸÉ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä ŸÑŸÖŸÜÿµÿ© MubarakWay.',
  'https://fondinsan.ru/uploads/cache/Programs/Program47/1bc0623de3-2_400x400.png',
  'general', true, true, 0, 0, 'https://fondinsan.ru', 'info@fondinsan.ru',
  NOW(), NOW()
)
ON CONFLICT (id) DO UPDATE SET
  name = EXCLUDED.name,
  is_active = true,
  updated_at = NOW();
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Step 2, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
SELECT id, name, is_active, category 
FROM public.funds 
WHERE is_active = true;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞:
```
id: 00000000-0000-0000-0000-000000000001
name: –§–æ–Ω–¥ –ò–Ω—Å–∞–Ω
is_active: true
category: general
```

### –®–∞–≥ 4: –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–æ–Ω–¥—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ –µ—Å—Ç—å –¥—Ä—É–≥–∏–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ñ–æ–Ω–¥—ã, –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∏—Ö:

```sql
UPDATE public.funds
SET is_active = false, updated_at = NOW()
WHERE id != '00000000-0000-0000-0000-000000000001'::uuid
  AND is_active = true;
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±: Table Editor

–ï—Å–ª–∏ SQL –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Table Editor:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Table Editor** ‚Üí **funds**
2. –ù–∞–∂–º–∏—Ç–µ **"Insert row"** (–∏–ª–∏ –Ω–∞–π–¥–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–æ–Ω–¥ –ò–Ω—Å–∞–Ω)
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è:
   - **id**: `00000000-0000-0000-0000-000000000001`
   - **name**: `–§–æ–Ω–¥ –ò–Ω—Å–∞–Ω`
   - **name_ar**: `ÿµŸÜÿØŸàŸÇ ÿ•ŸÜÿ≥ÿßŸÜ`
   - **category**: `general`
   - **is_verified**: `true` (—á–µ–∫–±–æ–∫—Å)
   - **is_active**: `true` (—á–µ–∫–±–æ–∫—Å)
   - –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –ø–æ –∂–µ–ª–∞–Ω–∏—é
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

## –ü—Ä–æ–≤–µ—Ä–∫–∞ RLS –ø–æ–ª–∏—Ç–∏–∫

–ï—Å–ª–∏ —Ñ–æ–Ω–¥ —Å–æ–∑–¥–∞–Ω, –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã funds
SELECT * FROM pg_policies 
WHERE tablename = 'funds';
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∞, —Ä–∞–∑—Ä–µ—à–∞—é—â–∞—è —á—Ç–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–æ–Ω–¥–æ–≤:

```sql
CREATE POLICY "funds_select_all"
  ON public.funds FOR SELECT
  USING (is_active = true);
```

## –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è/–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ñ–æ–Ω–¥–∞:

1. ‚úÖ –§–æ–Ω–¥ "–ò–Ω—Å–∞–Ω" –∞–∫—Ç–∏–≤–µ–Ω
2. ‚úÖ –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/funds` –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Ñ–æ–Ω–¥ "–ò–Ω—Å–∞–Ω"
3. ‚úÖ –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏ –∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å –∏—Ö –∫ —Ñ–æ–Ω–¥—É

