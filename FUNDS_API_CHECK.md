# üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ API —Ñ–æ–Ω–¥–æ–≤

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ —Ç–∞–±–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ—Ñ–∏–ª—è**
   - –£–ª—É—á—à–µ–Ω—ã –æ—Ç—Å—Ç—É–ø—ã –∏ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ
   - –ê–∫—Ç–∏–≤–Ω—ã–π —Ç–∞–± —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç –±–µ–ª—ã–π —Ñ–æ–Ω –∏ —Ç–µ–Ω—å
   - –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–∞–±—ã –∏–º–µ—é—Ç –ø—Ä–∏–≥–ª—É—à–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç

2. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ API —Ñ–æ–Ω–¥–æ–≤**
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –î–æ–±–∞–≤–ª–µ–Ω fallback —á–µ—Ä–µ–∑ API route
   - –£–ª—É—á—à–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

3. **–î–æ–±–∞–≤–ª–µ–Ω debug endpoint**
   - `/api/funds?debug=true` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

---

## üîß –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å API

### –í–∞—Ä–∏–∞–Ω—Ç 1: Debug endpoint (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://–≤–∞—à-–¥–æ–º–µ–Ω.vercel.app/api/funds?debug=true
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç:
- –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (—Ç–æ–ª—å–∫–æ id, name, is_active)
- –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (–≤—Å–µ –ø–æ–ª—è)
- –†–µ–∑—É–ª—å—Ç–∞—Ç —Ñ—É–Ω–∫—Ü–∏–∏ getFunds()
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Vercel

1. –û—Ç–∫—Ä–æ–π—Ç–µ Vercel Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Deployments** ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
3. –û—Ç–∫—Ä–æ–π—Ç–µ **Function Logs**
4. –ù–∞–π–¥–∏—Ç–µ –ª–æ–≥–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `[v0]`
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–ø—Ä–æ—Å

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/funds`
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Console**
4. –ù–∞–π–¥–∏—Ç–µ –ª–æ–≥–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `[FundsPage]` –∏–ª–∏ `[v0]`

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –∑–∞–ø—Ä–æ—Å
**–°–∏–º–ø—Ç–æ–º**: –û—à–∏–±–∫–∞ "permission denied" –∏–ª–∏ "PGRST116"

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏:
```sql
SELECT * FROM pg_policies WHERE tablename = 'funds';
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∞:
```sql
CREATE POLICY "funds_select_all"
  ON public.funds FOR SELECT
  USING (is_active = true);
```

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
**–°–∏–º–ø—Ç–æ–º**: –û—à–∏–±–∫–∞ "Missing Supabase environment variables"

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Vercel:
- `NEXT_PUBLIC_SUPABASE_URL`
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`

### 3. –§–æ–Ω–¥ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω
**–°–∏–º–ø—Ç–æ–º**: –ó–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–µ–Ω, –Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±–∞–∑–µ:
```sql
SELECT id, name, is_active FROM funds WHERE id = '00000000-0000-0000-0000-000000000001';
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `is_active = true`

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ debug endpoint** –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Vercel** –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
3. **–°–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** - —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç debug endpoint?

---

## üîÑ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–æ–Ω–¥, –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å admin client:

```typescript
// –í lib/actions/funds.ts –≤—Ä–µ–º–µ–Ω–Ω–æ
import { createAdminClient } from "@/lib/supabase/admin"

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å createAdminClient() –≤–º–µ—Å—Ç–æ createClient()
// –ù–æ —ç—Ç–æ –æ–±—Ö–æ–¥–∏—Ç RLS, –ø–æ—ç—Ç–æ–º—É —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!
```

–ù–æ –ª—É—á—à–µ —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É —á–µ—Ä–µ–∑ –ª–æ–≥–∏.

